<!doctype html>
<html lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
       <title>Lukujärjestys-kysely</title>
       <meta name="viewport" content="width=device-width, initial-scale=1">

        
        <link rel="stylesheet" type="text/css" href="styles.css">
        <link href="https://fonts.googleapis.com/css?family=Anton|Bree+Serif|Oxygen|Titillium+Web" rel="stylesheet">


   </head>
   <body>

       <form>
           
        
       <div id="lomake">
           
     <div id="intro">
                <h1>Kysely Launchpadin lukujärjestyksestä</h1>

            <p>Tämä kysely on tehty kartoittamaan tämän hetkiseen launchpad-lukujärjestykseen liittyviä ongelma-, sekä kehityskohtia. Pyrimme selvittämään millaisia ominaisuuksia käyttäjät toivovat lukujärjestykseltä. Kysely on luotu osana Digiprojekti-kurssia ja kyselyn ovat luoneet tietojenkäsittely-koulutusohjelman opiskelijat. Kyselyyn ovat osallistuneet digitaalisten palveluiden, sekä ohjelmistotuotannon opiskelijat.</p>
            </div>
           <h2>Kysely</h2>
       </div>
                                <button onClick="laheta()" id="nappi">Lähetä</button>
       </form>

   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js">
   </script>

   <script>
   var lomakekentta = [];
   $.getJSON("http://softex-kyselyt.herokuapp.com/kysymykset", function( data ) {

   //tehdään taulukko
   var items = [];
   $.each(data, function( key, d ) {


   //sijoitetaan kysymykset taulukkoon
   items.push("<p>" + d.kysymys + "<br>" +
   "<br> <input type='textarea' id="+ d.kysymys_id +"></p>"
   );
       
   //kerätään id tunnukset taulukkoon
   lomakekentta.push(d.kysymys_id);
   })

   //tulostetaan kysymykset sivulle
   $( "<div/>", {
    html: items.join( "" )
    }).appendTo( "#lomake" );
   });

   function laheta(){

       var vastaus;
       var tunnus;
       for (i=0; i<lomakekentta.length; i++){
       tunnus = lomakekentta[i];
       vastaus = document.getElementById(lomakekentta[i]).value;
       alert("{'id':"+lomakekentta[i]+",'+vastaus':'"+vastaus+"'}");
       }
   }
   </script>

   </body>
</html>
